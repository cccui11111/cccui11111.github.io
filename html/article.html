<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="artTitle">A Leaf'Blog</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- 让代码块不撑破 -->
  <style>pre{background:#f6f8fa;padding:1rem;overflow:auto;}</style>
</head>
<body>
  <header>
    <div class="header-inner">
      <h1><a href="index.html">A Leaf'Blog</a></h1>
      <nav>
        <a href="index.html">首页</a>
        <a href="#about">关于</a>
        <button id="themeBtn">🌓</button>
      </nav>
    </div>
  </header>
  <div id="progressBar"></div>

  <main id="articleContainer">加载中...</main>

  <footer><p>&copy; 2025 | Powered by GitHub Pages</p></footer>

  <script src="js/main.js"></script>
  <script>
    /* ===== 单篇文章加载 ===== */
    const params = new URLSearchParams(location.search);
    const postFile = params.get('post');          // 取出 ?post=xxx.md
    if (!postFile) location.href = 'index.html';  // 没参数就回首页

    fetch('daily/' + postFile)                    // 去 daily/ 目录拿 md
      .then(r => r.text())
      .then(text => {
        // 拆 front-matter 和正文
        const [_, meta, content] = text.split('---');
        const info = {};
        // 逐行解析 "key: value"
        meta.split('\n').forEach(line => {
          const [k, v] = line.split(':').map(s => s.trim());
          if (k) info[k] = v;
        });
        // 改标题 + 填充容器
        document.getElementById('artTitle').textContent = info.title;
        document.getElementById('articleContainer').innerHTML = `
          <article>
            <h2>${info.title}</h2>
            <time>${info.date}</time>
            <div>${md2html(content)}</div>
          </article>`;
      });
  </script>
</body>
</html>
